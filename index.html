<!--
<svg id=drop width=99 height=99 xmlns='http://www.w3.org/2000/svg'><path d="M50 1L47 11A1 1 0 0 0 53 11Z" fill="#ddeeff" stroke="#000000"/></svg>

<svg id=eyes width=99 height=99 xmlns='http://www.w3.org/2000/svg'><path d="M3 3Q4 10 12 8Z" fill="#000000" stroke="#000000"/><path d="M16 8Q24 10 24 3Z" fill="#000000" stroke="#000000"/></svg>

<svg id=lightning width=99 height=99 xmlns='http://www.w3.org/2000/svg'><path d="M92 0L66 29L61 14L28 43L59 20L66 42L56 52L53 40L32 57L50 70L36 91L56 69L40 58L50 48L54 61L72 41L67 32L99 0Z" fill="yellow" stroke="#000000"/></svg>

<svg id=fire width=99 height=99 xmlns='http://www.w3.org/2000/svg'><path d="M20 99Q0 78 18 19Q30 81 43 6Q57 57 79 18Q96 91 66 99Z" fill="orange" stroke="#000000"/><path d="M31 99Q14 82 16 47Q40 96 46 34Q66 80 72 44Q80 89 61 99Z" fill="yellow" stroke="#000000"/></svg>

<svg id=bubble1 width=99 height=99 xmlns='http://www.w3.org/2000/svg'><path d="M15 85L34 66L26 66C5 65 6 20 26 20L75 20C98 22 98 67 75 66L38 66Z" fill="#ffffff" stroke="#000000"/></svg>

<svg id=bubble2 width=99 height=99 xmlns='http://www.w3.org/2000/svg'><path d="M15 85L34 60L21 63L25 52L8 51L19 41L7 29L18 27L13 11L30 18L34 5L45 15L56 5L61 14L73 7L71 15L89 8L86 16L97 15L87 30L97 37L85 40L95 58L76 51L81 66L61 57L61 68L41 60Z" fill="#ffffff" stroke="#000000"/></svg>
-->
<div id=v>
<h1 id=light></h1>
<div id=s>

<div id=devil></div>
<div id=head></div>
<div id=dialog></div>
<div id=dialog2></div>


</div>
<!--h1 id=caption>JS13kGames presents</h1-->
</div>

<style>
@keyframes fire {
  50% { background-position: 0 -150px; }
}
body { background: #111 }
#v { width:800px;height:600px;overflow:hidden;margin:auto; background: linear-gradient(#000,#700);background-size: 200% 200%; animation: fire infinite 2s; ; position: relative; }
#s { width: 100%; height: 100%}
#head { position: absolute; top: 0; left: 0; width: 99px; height: 99px; background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 99A20 19 0 0 1 30 80L20 40L13 34L23 38L20 31L27 36L28 28L31 36L33 25L36 34L40 27L42 34L47 25L47 33L56 23L52 33L61 28L56 37L68 30L62 38L55 80A23 19 0 0 1 80 99Z' fill='%23000000'/%3E%3C/svg%3E"); transform: translateX(200px) translateY(700px) scale(4) rotate(45deg); transition: all .5s;}
#dialog { position: absolute; top: 0; left: 0; color: #fff; font: 40px calibri, arial; width: 350px; height: 99px; transform: translateX(350px) translateY(450px); }
#dialog2 { position: absolute; top: 0; left: 0; color: #f00; font: 35px bold serif; width: 550px; height: 99px; transform: translateX(30px) translateY(30px); }
#devil { position: absolute; top: 0; left: 0; width: 99px; height: 99px; background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 99Q4 64 30 60Q18 50 25 35Q14 26 27 15Q21 25 31 32Q39 25 50 32Q58 22 50 16Q65 18 56 35Q64 51 50 61Q81 61 91 99Z' fill='%23ff0000'/%3E%3C/svg%3E"); transform: translateX(500px) translateY(-220px) scale(17); transition: all 5s; opacity: .01}
h1 { opacity: 0; position: absolute; top: 0; left: 0; color: #000; text-align: center; font: 30px arial; margin: 0; padding: 250px 0 0; background: #fff; width: 100%; height: 100%; }
</style>

<script>
onload = () => {
  setTimeout(()=>head.style.transform = "translateX(200px) translateY(355px) scale(4)",1000);
  setTimeout(()=>dialog.innerHTML = "WH... WHERE AM I?",3000);
  setTimeout(()=>dialog.style.left = "-50px",6000);
  setTimeout(()=>dialog.innerHTML = "",6000);
  setTimeout(()=>dialog.style.fontSize = "30px", 6000);
  setTimeout(()=>head.style.transition = "all 5s",6000);
  setTimeout(()=>head.style.transform = "translateX(150px) translateY(455px) scale(2)",6000);
  setTimeout(()=>devil.style.opacity = ".05",6000);
  setTimeout(()=>devil.style.transform = "translateX(500px) translateY(220px) scale(7)",6000);
  setTimeout(()=>dialog2.innerHTML = "YOU ARE<br>IN A PLACE<br>BEYOND SPACE<br>AND TIME...",10000);
    setTimeout(()=>devil.style.transition = "all 16s", 10000);
  setTimeout(()=>head.style.transition = "all 16s", 10000);
  setTimeout(()=>devil.style.transform = "translateX(450px) translateY(220px) scale(7)",10000);
  setTimeout(()=>head.style.transform = "translateX(180px) translateY(455px) scale(2)",10000);
  setTimeout(()=>dialog2.innerHTML = "", 15000);
  setTimeout(()=>dialog.innerHTML = "OH MY GOD... AM I DEAD?", 16000);
  setTimeout(()=>dialog.innerHTML = "", 19000);
  setTimeout(()=>dialog2.innerHTML = "WORSE THAN<br>THAT...", 20000);
  setTimeout(()=>dialog2.innerHTML = "", 22000);
  setTimeout(()=>dialog2.innerHTML = "<br><br>YOU ARE...", 23000);
  setTimeout(()=>dialog2.innerHTML = "", 24000);
  setTimeout(()=>dialog2.innerHTML = "<br>IN A<br>PUZZLE<br>GAME!", 25000);
  setTimeout(()=>devil.style.transition = "all .5s", 25000);
  setTimeout(()=>head.style.transition = "all .5s", 25000);
  setTimeout(()=>devil.style.transform = "translateX(515px) translateY(365px) scale(12)", 25000);
  setTimeout(()=>head.style.transform = "translateX(85px) translateY(574px) scale(5)", 25000);
  setTimeout(()=>dialog2.innerHTML = "", 28000);
  setTimeout(()=>light.style.opacity = .7, 26500);
  setTimeout(()=>light.style.opacity = 0, 26570);
  setTimeout(()=>light.style.opacity = .7, 26800);
  setTimeout(()=>light.style.opacity = 0, 26950);
  /*setTimeout(()=>devil.style.transition = "none", 31000);
  setTimeout(()=>head.style.transition = "none", 31000);
  setTimeout(()=>dialog.style.left = "-330px", 31000);
  setTimeout(()=>dialog.style.top = "-55px", 31000);
  setTimeout(()=>dialog2.style.left = "300px", 31000);
  setTimeout(()=>dialog2.style.top = "350px", 31000);
  setTimeout(()=>devil.style.transform = "translateX(575px) translateY(365px) scale(4)", 31000);
  setTimeout(()=>head.style.transform = "translateX(85px) translateY(505px) scale(1)", 31000);
  setTimeout(()=>dialog.innerHTML = "SO... I'M ALIVE?", 32000);
  setTimeout(()=>dialog.innerHTML = "", 33500);
  setTimeout(()=>dialog2.innerHTML = "NO.", 34000);
  setTimeout(()=>dialog2.innerHTML = "", 35000);
  setTimeout(()=>caption.innerHTML = "a game by xem", 35000);
  setTimeout(()=>caption.style.opacity = 1, 35500);
  setTimeout(()=>caption.style.opacity = 0, 39000);
  setTimeout(()=>devil.style.transform = "translateX(475px) translateY(450px) scale(2)", 39000);
  setTimeout(()=>head.style.transform = "translateX(185px) translateY(530px) scale(.5)", 39000);
  setTimeout(()=>dialog.innerHTML = "BUT I HATE PUZZLES", 40000);
  setTimeout(()=>dialog.innerHTML = "", 41500);
  setTimeout(()=>dialog2.innerHTML = "WE ALL DO", 42000);
  setTimeout(()=>dialog2.innerHTML = "", 43000);*/
  

}

</script>

<script>

// Mini Piano

// params: note value / inversed 1 / inversed 2
n = (e, i1, i2) => {
   for(
  
    // V: note length in seconds
    V = 2,
    
    // O: piano is selected
    u = i2,
    
    // Temp vars for guitar synthesis
    v = [],
    p = c = 0,
    
    // Modulation
    // This function generates the i'th sample of a sinusoidal signal with a specific frequency and amplitude
    b = (e, t, a, i) => Math.sin(e / t * 6.28 * a + i),
    
    // Instrument synthesis
    w = (e, t) =>
    
      u 

      // Piano
      ? Math.sin(e / 44100 * t * 6.28 + b(e, 44100, t, 0) ** 2 + .75 * b(e, 44100, t, .25) + .1 * b(e, 44100, t, .5))
      
      // Guitar
      : (
        P = 44100 / t,
        r = 0,
        v.length <= 1 + ~~P
        ? (v.push(2 * Math.random() - 1), v[v.length - 1])
        : (v[p] = .5 * (
          v[p >= v.length - 1 ? 0 : p + 1] + v[p]
          ),
          p >= ~~P && (
            p < 1 + ~~P 
            ? c % 100 >= ~~(100 * (P - ~~P)) &&(r = 1, v[p+1] = .5 * (v[0] + v[p + 1]), c++)
            : r = 1
          ),
          p = r ? 0 : p + 1,
          v[p]
        )
      ),
    
    // Sound samples
    D = [],
    
    // Loop on all the samples
    i = 0;
    i < 44100 * V;
    i++
  ){
  
    // Fill the samples array
    D[i] =
    
      // The first 88 samples represent the note's attack
      i < 120 
      ? i / 120.2 * w(i, e) 
      
      // The other samples represent the rest of the note
      : ((1 - (i - 88.2) / (44100 * (V - .002))) ** (u ? (.5 * Math.log(1e4 * e / 44100)) ** 2 : 1) * w(i, e)) / (u ? 1 : 5);
  }
  
  // Play the note
  A = new AudioContext,
  m = A.createBuffer(1, 1e6, 44100),
  m.getChannelData(0).set(i1 ? D.reverse() : D),
  s = A.createBufferSource(),
  s.buffer = m,
  s.connect(A.destination),
  s.start()
}
</script>
<!--
<button onclick=n(70,0,0)>70,normal,guitar</button>
<button onclick=n(70,1,0)>70,reversed,guitar</button>
<button onclick=n(70,0,1)>70,normal,piano</button>
<button onclick=n(70,1,1)>70,reversed,piano</button>-->